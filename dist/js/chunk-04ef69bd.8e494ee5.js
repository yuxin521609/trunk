(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-04ef69bd"],{"0cdb":function(e,t,r){},2271:function(e,t,r){"use strict";var i=r("0cdb"),a=r.n(i);a.a},"61f7":function(e,t,r){"use strict";r.d(t,"f",function(){return i}),r.d(t,"e",function(){return a}),r.d(t,"k",function(){return n}),r.d(t,"n",function(){return s}),r.d(t,"g",function(){return o}),r.d(t,"i",function(){return l}),r.d(t,"h",function(){return d}),r.d(t,"l",function(){return u}),r.d(t,"d",function(){return c}),r.d(t,"a",function(){return p}),r.d(t,"c",function(){return f}),r.d(t,"m",function(){return h}),r.d(t,"b",function(){return v}),r.d(t,"j",function(){return m});r("4917");function i(e,t,r){var i=/^\d+\.\d+\.\d+$/;i.test(t)||r(new Error("请输入正确的版本号")),r()}function a(e,t,r){var i=/(http|https|ftp):\/\/([\w.]+\/?)\S*/;i.test(t)||r(new Error("请输入正确的下载地址")),r()}function n(e,t,r){var i=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d_]{6,18}$/;void 0!=e.skipAdmin&&0!=e.skipAdmin||"admin"!==t?""!==t.trim()?t.trim().length<6?r(new Error("长度最小6位")):i.test(t)?r():r(new Error("必须包含大小写英文字母+数字组合 6位到18位 支持下划线")):r(new Error("不能为空")):r()}function s(e,t,r){var i=/^[0-9A-Z]{1,2}$/,a=/^[0-9A-Z]{2,2}$/;""!==t.trim()?i.test(t)?a.test(t)?r():r(new Error("必须两位")):r(new Error("必须是大写英文字母或数字")):r(new Error("不能为空"))}function o(e,t,r){var i=/^[0-9]{1,2}$/,a=/^[0-9]{2,2}$/;""!==t.trim()?i.test(t)?a.test(t)?r():r(new Error("必须两位")):r(new Error("必须是数字")):r(new Error("不能为空"))}function l(e,t,r){var i=/^[0-9]*$/;if(t<=0)r(new Error("不能输入小于0"));else{if("validityPeriod"==e.field){if(t>100)return void r(new Error("不能输入大于100"))}else if(t>1e4)return void r(new Error("不能输入大于10000"));i.test(t)?r():r(new Error("请输入自然数"))}}function d(e,t,r){var i=/^\d(\.\d?)?$/g;t<=0?r(new Error("不能输入小于0")):i.test(t)?r():r(new Error("不能大于9.9或小于0.1"))}function u(e,t,r){t<=0?r(new Error("不能输入小于0")):r()}function c(e){e.target.value=e.target.value.match(/^\d*(\.?\d{0,2})/g)[0]||null}function p(e){e.target.value=e.target.value.match(/^[0-9]*/g)[0]||null}function f(e){var t=/^1[0-9][0-9]\d{8}$/;return t.test(e)}function h(e,t,r,i){var a=/^[0-9]*$/;t<=0?r(new Error("不能输入小于0")):i?t>i?r(new Error("计划出库不可大于可用库存")):t>1e5?r(new Error("不能输入大于100000")):a.test(t)?r():r(new Error("请输入自然数")):r(new Error("无可用库存！"))}function v(e){var t=/(\d{4}\s){4}\d{3}/;return t.test(e)}function m(e,t,r){var i=/^[0-9]*$/;t?i.test(t)?r():r(new Error("必须是数字组成")):r(new Error("必录"))}},7135:function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{ref:"filtersForm",attrs:{rules:e.rules,"label-width":"110px",model:e.filtersData,size:"small"}},[r("div",{staticClass:"tlogy-item"},[r("el-form-item",{attrs:{prop:"type",label:"操作系统："}},[r("el-select",{staticClass:"input-w-2",attrs:{placeholder:"请选择",disabled:e.showDisabled,value:e.filtersData.type},on:{change:e.handleTypeChange},model:{value:e.filtersData.type,callback:function(t){e.$set(e.filtersData,"type",t)},expression:"filtersData.type"}},e._l(e.typeListData,function(e){return r("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})}),1)],1),r("el-form-item",{attrs:{prop:"version",label:"升级版本："}},[r("el-select",{staticClass:"input-w-2",attrs:{placeholder:e.filtersData.type?"请选择":"请先选择操作系统",disabled:e.showDisabled||!e.filtersData.type,value:e.filtersData.version},on:{change:e.handleVersionGet},model:{value:e.filtersData.version,callback:function(t){e.$set(e.filtersData,"version",t)},expression:"filtersData.version"}},e._l(e.versionListData,function(e){return r("el-option",{key:e.version,attrs:{label:e.version,value:e.version}})}),1)],1),r("el-form-item",{attrs:{prop:"forcedUpgrade",label:"升级形式："}},[r("el-select",{staticClass:"input-w-2",attrs:{placeholder:"请选择",disabled:e.showDisabled,value:e.filtersData.forcedUpgrade},model:{value:e.filtersData.forcedUpgrade,callback:function(t){e.$set(e.filtersData,"forcedUpgrade",t)},expression:"filtersData.forcedUpgrade"}},e._l(e.forcedUpgradeOpts,function(e){return r("el-option",{key:e.type,attrs:{label:e.name,value:e.type}})}),1)],1),r("el-form-item",{attrs:{prop:"upgradeScope",label:"升级范围："}},[r("el-select",{staticClass:"input-w-2",attrs:{placeholder:"请选择",disabled:e.showDisabled,value:e.filtersData.upgradeScope},model:{value:e.filtersData.upgradeScope,callback:function(t){e.$set(e.filtersData,"upgradeScope",t)},expression:"filtersData.upgradeScope"}},e._l(e.upgradeScopeOpts,function(e){return r("el-option",{key:e.type,attrs:{label:e.name,value:e.type}})}),1)],1),r("el-form-item",{attrs:{prop:"downloadUrl",label:"升级URL："}},[r("el-input",{staticClass:"input-w-2",attrs:{disabled:e.showDisabled,placeholder:"http://或https://"},model:{value:e.filtersData.downloadUrl,callback:function(t){e.$set(e.filtersData,"downloadUrl",t)},expression:"filtersData.downloadUrl"}})],1),r("el-form-item",{attrs:{prop:"description",label:"升级提示："}},[r("el-input",{staticClass:"input-w-2",attrs:{type:"textarea",autosize:"",disabled:e.showDisabled,placeholder:"请输入内容"},model:{value:e.filtersData.description,callback:function(t){e.$set(e.filtersData,"description",t)},expression:"filtersData.description"}})],1),r("div",{staticClass:"item-footer"},["add"==e._type?r("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.submitForm("filtersForm")}}},[e._v("确定")]):"edit"==e._type?r("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.submitForm("filtersForm")}}},[e._v("修改")]):e._e(),r("el-button",{attrs:{size:"small"},on:{click:function(t){return e.routerback("filtersForm")}}},[e._v("取消")])],1)],1)])],1)},a=[],n=(r("7514"),r("6b54"),r("61f7")),s={data:function(){return{filtersData:{description:"",version:"",versionId:"",type:"",forcedUpgrade:null,downloadUrl:"",upgradeScope:""},typeListData:[{name:"Android"},{name:"iOS"}],forcedUpgradeOpts:[{name:"强制",type:!0},{name:"可选",type:!1}],upgradeScopeOpts:[{name:"全部",type:"all"}],versionListData:[],showDisabled:!1,editDisabled:!1,_type:"",_id:"",rules:{type:[{required:!0,message:"请选择操作系统",trigger:"change"}],version:[{required:!0,message:"请选择版本号",trigger:"change"}],forcedUpgrade:[{required:!0,message:"请选择升级形式",trigger:"change"}],upgradeScope:[{required:!0,message:"请选择升级范围",trigger:"change"}],downloadUrl:[{required:!0,message:"请输入升级地址",trigger:"blur"},{validator:n["e"],trigger:"blur"}]}}},created:function(){this.init(),this.getQueryparams()},methods:{init:function(){this.filtersData={description:"",version:"",versionId:"",type:"",forcedUpgrade:null,downloadUrl:"",upgradeScope:""}},getQueryparams:function(){this._type=this.$route.query.type,this._id=this.$route.query.id;var e=this._type;switch(e.toString()){case"add":this.editDisabled=!1,this.showDisabled=!1;break;case"edit":this.editDisabled=!0,this.showDisabled=!1,this.getEchoDisplayData();break;case"show":this.editDisabled=!0,this.showDisabled=!0,this.getEchoDisplayData();break}},handleTypeChange:function(e){this.filtersData.version="",this.filtersData.versionId="",this.getVersionList(e)},getVersionList:function(e){var t=this;this.request(this.api.version.applicationVersion_list,{type:e}).then(function(e){var r=e.data;t.versionListData=r})},handleVersionGet:function(e){var t=this.versionListData.find(function(t){return t.version==e});this.filtersData.versionId=t.id},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.request(t.api.version.applicationVersionControl_save,t.filtersData).then(function(e){t.$message.success("保存成功"),setTimeout(function(){t.routerback()},500)})})},getEchoDisplayData:function(){var e=this;this.request(this.api.version.applicationVersionControl_get,{id:this._id}).then(function(t){e.filtersData=t,e.getVersionList(t.type)})},routerback:function(){this.$router.go(-1)}}},o=s,l=(r("2271"),r("2877")),d=Object(l["a"])(o,i,a,!1,null,"4d8e062c",null);t["default"]=d.exports}}]);