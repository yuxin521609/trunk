(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-aeb4bd58"],{"0b96":function(e,t,n){},2029:function(e,t,n){},"2db4":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-wrap"},[n("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm login-container",attrs:{"label-position":"left",model:e.ruleForm,rules:e.rules,"label-width":"0px"}},[n("el-tabs",{staticClass:"loginClick",on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"密码登录",name:"first"}},[e.isChildUpdate1?n("div",[n("el-form-item",{attrs:{prop:"phoneNum"}},[n("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"请输入手机号",maxlength:"11"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleForm("pwd")}},model:{value:e.ruleForm.phoneNum,callback:function(t){e.$set(e.ruleForm,"phoneNum",t)},expression:"ruleForm.phoneNum"}})],1),n("el-form-item",{staticClass:"pwdLogin",attrs:{prop:"pwd"}},[n("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"请输入密码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleForm("pwd")}},model:{value:e.ruleForm.pwd,callback:function(t){e.$set(e.ruleForm,"pwd",t)},expression:"ruleForm.pwd"}})],1),n("div",{staticClass:"forgetDiv"},[n("el-button",{staticClass:"forgetPassword",attrs:{size:"mini"},on:{click:e.forgetPassword}},[e._v("忘记密码？")])],1),n("el-form-item",{staticStyle:{width:"100%"}},[n("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",loading:e.logining},on:{click:function(t){return e.handleForm("pwd")}}},[e._v("登录")])],1)],1):e._e()]),n("el-tab-pane",{attrs:{label:"验证码登录",name:"second"}},[e.isChildUpdate2?n("div",[n("el-form-item",{attrs:{prop:"phoneNum"}},[n("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"请输入手机号",maxlength:"11"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleForm("code")}},model:{value:e.ruleForm.phoneNum,callback:function(t){e.$set(e.ruleForm,"phoneNum",t)},expression:"ruleForm.phoneNum"}})],1),n("el-form-item",{attrs:{prop:"code"}},[n("el-input",{staticClass:"verification",attrs:{"auto-complete":"off",placeholder:"请输入验证码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleForm("code")}},model:{value:e.ruleForm.code,callback:function(t){e.$set(e.ruleForm,"code",t)},expression:"ruleForm.code"}}),n("div",{staticClass:"codeClick",on:{click:e.codeClickSubmit}},[e._v("\n              "+e._s(e.buttonText)+"\n            ")])],1),n("el-form-item",{staticStyle:{width:"100%"}},[n("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",loading:e.logining},on:{click:function(t){return e.handleForm("code")}}},[e._v("登录")])],1)],1):e._e()])],1),n("div",[n("div",{staticClass:"hint"},[e._v("还没有账号？")]),n("el-form-item",{staticStyle:{width:"100%"}},[n("el-button",{staticStyle:{width:"100%"},attrs:{plain:""},on:{click:e.registerForm}},[e._v("立即注册")])],1)],1)],1),n("SelectOrganization",{ref:"SelectOrganizationRef",on:{change:e.getTenant}})],1)},i=[],o=(n("7f7f"),n("cebc")),a=(n("5f87"),n("f4a2")),l=n("fe24"),s=n("2f62"),u=n("61f7"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-dialog",{staticClass:"alarmPopup",attrs:{title:"账号存在多组织，请选择：",visible:e.dialogVisible,width:"400px","show-close":!1,"before-close":e.closeDialog},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("ul",{staticClass:"wrap"},e._l(e.tenantList,function(t,r){return n("li",{key:r,class:{active:t.isSelected},on:{click:function(n){return e.itemClick(t,r)}}},[e._v(e._s(t.name))])}),0)])],1)},d=[],h={data:function(){return{dialogVisible:!1,tenantId:"",tenantList:[],type:""}},created:function(){},methods:{propInit:function(e,t){for(var n=0;n<e.length;n++)e[n].isSelected=!1;this.tenantList=e,this.type=t,this.dialogVisible=!0},itemClick:function(e){e.isSelected=!e.isSelected,this.tenantId=e.id?e.id:"",e.isSelected&&(this.$emit("change",this.tenantId,this.type),this.dialogVisible=!1),this.noClick(e)},noClick:function(e){for(var t=0;t<this.tenantList.length;t++)e.id!=this.tenantList[t].id&&(this.tenantList[t].isSelected=!1)},closeDialog:function(e){if(!this.tenantId)return this.$message.error("请选择归属货主！"),!1;e()}}},f=h,m=(n("f39e"),n("2877")),p=Object(m["a"])(f,c,d,!1,null,"75cb17a8",null),g=p.exports,v={components:{SelectOrganization:g},data:function(){return{logining:!1,ruleForm:{phoneNum:"",pwd:"",code:""},tenantId:null,tenantStatus:!1,rules:{phoneNum:[{required:!0,message:"请输入手机号",trigger:"blur"}],pwd:[{required:!0,message:"请输入密码",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}]},activeName:"first",isChildUpdate1:!0,isChildUpdate2:!1,buttonText:"发送验证码",isDisabled:!1,flag:!0}},created:function(){localStorage.clear(),sessionStorage.clear()},methods:Object(o["a"])({},Object(s["d"])({FN_SET_TOKEN:a["d"]}),Object(s["b"])({FN_CODESET_LOAD:l["b"]}),{handleClick:function(e,t){"first"==e.name?(this.isChildUpdate1=!0,this.isChildUpdate2=!1,this.ruleForm.phoneNum,this.ruleForm.pwd):"second"==e.name&&(this.isChildUpdate1=!1,this.isChildUpdate2=!0,this.ruleForm.phoneNum,this.ruleForm.code)},pwdForm:function(){var e=this;this.logining=!0,this.request(this.api.user.login_loginByPwd,{phoneNum:this.ruleForm.phoneNum,pwd:this.ruleForm.pwd,tenantId:this.tenantId}).then(function(t){e.FN_SET_TOKEN(t.token),e.FN_CODESET_LOAD(),localStorage.setItem("userName",t.userInfo.userName),localStorage.setItem("tenantId",t.userInfo.tenantId),e.$router.push({path:"/home"})}).catch(function(t){e.logining=!1})},codeClickSubmit:function(){var e=this;if(""==this.ruleForm.phoneNum)return this.$message.error("请输入手机号"),!1;this.request(this.api.user.login_sendCode,{phoneNum:this.ruleForm.phoneNum,type:2}).then(function(t){var n=e.ruleForm.phoneNum;if(e.checkMobile(n)){var r=60;if(e.buttonText="已发送",e.isDisabled=!0,e.flag){e.flag=!1;var i=setInterval(function(){r--,e.buttonText="".concat(r," 秒"),0===r&&(clearInterval(i),e.buttonText="重新获取",e.isDisabled=!1,e.flag=!0)},1e3)}}}).catch(function(e){})},PhoneAndCodeForm:function(){var e=this;this.logining=!0,this.request(this.api.user.login_loginByPhoneAndCode,{phoneNum:this.ruleForm.phoneNum,code:this.ruleForm.code,tenantId:this.tenantId}).then(function(t){localStorage.setItem("userName",t.userInfo.userName),localStorage.setItem("tenantId",t.userInfo.tenantId),e.FN_SET_TOKEN(t.token),e.FN_CODESET_LOAD(),e.$router.push({path:"/home"})}).catch(function(t){e.logining=!1})},checkMobile:function(e){var t=/^1\d{10}$/;return!!t.test(e)},registerForm:function(){this.$router.push({path:"/login/register"})},forgetPassword:function(){this.$router.push({path:"/login/find"})},handleForm:function(e){var t=this;this.$refs.ruleForm.validate(function(n){return n?t.tenantId&&t.tenantStatus?("pwd"==e?t.pwdForm():t.PhoneAndCodeForm(),!1):Object(u["c"])(t.ruleForm.phoneNum)?void t.request(t.api.user.userCompany_loginCheckTenantData,{phoneNum:t.ruleForm.phoneNum}).then(function(n){n.length>1?t.$refs.SelectOrganizationRef.propInit(n,e):1==n.length&&(t.tenantStatus=!0,t.tenantId=n[0].id,"pwd"==e?t.pwdForm():t.PhoneAndCodeForm())}).catch(function(e){}):(t.$message.error("请输入正确的手机号！"),!1):(t.logining=!1,!1)})},phoneNumBlur:function(e){var t=this;Object(u["c"])(e.target.value)&&this.request(this.api.user.userCompany_loginCheckTenantData,{phoneNum:e.target.value}).then(function(e){e.length>1?t.$refs.SelectOrganizationRef.propInit(e):1==e.length&&(t.tenantId=e[0].id)}).catch(function(e){})},getTenant:function(e,t){this.tenantId=e,this.tenantStatus=!0,"pwd"==t?this.pwdForm():this.PhoneAndCodeForm()}}),watch:{"ruleForm.phoneNum":function(e){this.tenantStatus=!1}}},w=v,b=(n("7eca"),Object(m["a"])(w,r,i,!1,null,"199a8a72",null));t["default"]=b.exports},"61f7":function(e,t,n){"use strict";n.d(t,"f",function(){return r}),n.d(t,"e",function(){return i}),n.d(t,"k",function(){return o}),n.d(t,"n",function(){return a}),n.d(t,"g",function(){return l}),n.d(t,"i",function(){return s}),n.d(t,"h",function(){return u}),n.d(t,"l",function(){return c}),n.d(t,"d",function(){return d}),n.d(t,"a",function(){return h}),n.d(t,"c",function(){return f}),n.d(t,"m",function(){return m}),n.d(t,"b",function(){return p}),n.d(t,"j",function(){return g});n("4917");function r(e,t,n){var r=/^\d+\.\d+\.\d+$/;r.test(t)||n(new Error("请输入正确的版本号")),n()}function i(e,t,n){var r=/(http|https|ftp):\/\/([\w.]+\/?)\S*/;r.test(t)||n(new Error("请输入正确的下载地址")),n()}function o(e,t,n){var r=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d_]{6,18}$/;void 0!=e.skipAdmin&&0!=e.skipAdmin||"admin"!==t?""!==t.trim()?t.trim().length<6?n(new Error("长度最小6位")):r.test(t)?n():n(new Error("必须包含大小写英文字母+数字组合 6位到18位 支持下划线")):n(new Error("不能为空")):n()}function a(e,t,n){var r=/^[0-9A-Z]{1,2}$/,i=/^[0-9A-Z]{2,2}$/;""!==t.trim()?r.test(t)?i.test(t)?n():n(new Error("必须两位")):n(new Error("必须是大写英文字母或数字")):n(new Error("不能为空"))}function l(e,t,n){var r=/^[0-9]{1,2}$/,i=/^[0-9]{2,2}$/;""!==t.trim()?r.test(t)?i.test(t)?n():n(new Error("必须两位")):n(new Error("必须是数字")):n(new Error("不能为空"))}function s(e,t,n){var r=/^[0-9]*$/;if(t<=0)n(new Error("不能输入小于0"));else{if("validityPeriod"==e.field){if(t>100)return void n(new Error("不能输入大于100"))}else if(t>1e4)return void n(new Error("不能输入大于10000"));r.test(t)?n():n(new Error("请输入自然数"))}}function u(e,t,n){var r=/^\d(\.\d?)?$/g;t<=0?n(new Error("不能输入小于0")):r.test(t)?n():n(new Error("不能大于9.9或小于0.1"))}function c(e,t,n){t<=0?n(new Error("不能输入小于0")):n()}function d(e){e.target.value=e.target.value.match(/^\d*(\.?\d{0,2})/g)[0]||null}function h(e){e.target.value=e.target.value.match(/^[0-9]*/g)[0]||null}function f(e){var t=/^1[0-9][0-9]\d{8}$/;return t.test(e)}function m(e,t,n,r){var i=/^[0-9]*$/;t<=0?n(new Error("不能输入小于0")):r?t>r?n(new Error("计划出库不可大于可用库存")):t>1e5?n(new Error("不能输入大于100000")):i.test(t)?n():n(new Error("请输入自然数")):n(new Error("无可用库存！"))}function p(e){var t=/(\d{4}\s){4}\d{3}/;return t.test(e)}function g(e,t,n){var r=/^[0-9]*$/;t?r.test(t)?n():n(new Error("必须是数字组成")):n(new Error("必录"))}},"7eca":function(e,t,n){"use strict";var r=n("0b96"),i=n.n(r);i.a},f39e:function(e,t,n){"use strict";var r=n("2029"),i=n.n(r);i.a}}]);